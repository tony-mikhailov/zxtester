# minimal_working.cfg - минимальный рабочий вариант

# Интерфейс ST-Link
source [find interface/stlink-v2.cfg]

# Транспорт (hla_swd для ST-Link)
transport select hla_swd

# Скорость
adapter speed 1000

# Настройка сброса
reset_config srst_only

# Инициализация
init

# Создаем отладочный порт (правильный синтаксис)
dap newtap rp2040 cpu -irlen 4

# Создаем цель
target create rp2040.core0 cortex_m -dap rp2040.cpu

# Рабочая область
rp2040.core0 configure -work-area-phys 0x20000000 -work-area-size 0x4000

echo "Готово к отладке!"